"use strict";var DateRangePickerOption=function(){function n(n,t,i){n===void 0&&(n="daterange-picker");t===void 0&&(t="betlist-form");i===void 0&&(i=null);this.selectorId=n;this.betlistFormId=t;this.onChange=i;this.selectorId=n;this.betlistFormId=t;this.onChange=i}return n}(),DateRangePickerComponent=function(){function n(n){var t=this;this.options=new DateRangePickerOption;this.quickChooseType={specificDates:7};this.isCompleteInitDateRangePicker=!1;this.render=function(n){var u;n===void 0&&(n=new DateRangePickerOption);t.options=t.$.extend({},t.options,n);var i=t.$("#"+t.options.selectorId),f=i.data("currentdate"),e=i.data("mindate"),r=i.data("maxdate");return t.$betlistForm=t.$("#"+t.options.betlistFormId),u="MM/DD/YYYY",i.nexDatePicker({datePickerFormat:{dateFormat:u},selectedItem:i.data("selecteddaterange"),minDate:new Date(e),maxDate:r===""?null:r,currentDate:new Date(f),onSelectDatePicker:function(){t.options.onChange&&t.options.onChange()},onQuickChooseChange:function(n){t.isCompleteInitDateRangePicker&&n!==t.quickChooseType.specificDates&&(t.$("#PageIndex").val(1),t.$betlistForm.submit())}}),t.isCompleteInitDateRangePicker=!0,i};this.$=n}return n}(),ProductMultiSelectionOption,ProductMultiSelectionComponent,SingleSelectionDropdownOption,SingleSelectionDropdownComponent,MemberBetListView,__extends,RunningBetListView;ProductMultiSelectionOption=function(){function n(n,t,i,r){n===void 0&&(n="dropdown-product");t===void 0&&(t=!0);i===void 0&&(i="product-ids");r===void 0&&(r=null);this.dropdownId=n;this.validateBeforeSubmit=t;this.productsInputId=i;this.onChange=r}return n}();ProductMultiSelectionComponent=function(){function n(n){var t=this;this.options=new ProductMultiSelectionOption;this.render=function(n){var i,r;return n===void 0&&(n=new ProductMultiSelectionOption),t.options=t.$.extend({},t.options,n),t.$dropdownProduct=t.$("#"+t.options.dropdownId),i=t.convertAttributeToBool(t.$dropdownProduct.data("has-any-product")),t.$hiddenInput=t.$("#"+t.options.productsInputId),r=1,t.$dropdownProduct.multiselect({maxHeight:300,numberDisplayed:r,nonSelectedText:i?t.$dropdownProduct.data("label-select-products"):t.$dropdownProduct.data("label-there-is-no-product"),nSelectedText:" "+t.$dropdownProduct.data("label-selected"),allSelectedText:t.$dropdownProduct.data("label-all-products"),includeSelectAllOption:i,onChange:t.onChange,onSelectAll:t.onChange,language:t.$dropdownProduct.data("language"),enableCollapsibleOptGroups:!0,optionClass:t.optionClass}),t.$dropdownProduct.next().find(".multiselect-container li").removeClass("hidden"),t.$multiSelectButton=t.$dropdownProduct.parent().find(".multiselect.btn"),t.$dropdownProduct};this.onChange=function(){t.validate();t.$hiddenInput.val(t.getSelectedItems().join(","));t.options.onChange&&t.options.onChange()};this.optionClass=function(n){if(t.$(n).data("isnested")===1)return"multiselect-nested-item"};this.validate=function(){t.options.validateBeforeSubmit&&t.$multiSelectButton&&t.$dropdownProduct.find("option:selected").length&&t.$multiSelectButton.hasClass("error")&&t.$multiSelectButton.removeClass("error")};this.getSelectedItems=function(){var n=[],i=t.$dropdownProduct.find("option:selected"),r=t.$;return i.each(function(){n.push([r(this).val()])}),n};this.convertAttributeToBool=function(n){return!!n&&n.toString().toLowerCase()==="true"};this.$=n}return n}();SingleSelectionDropdownOption=function(){function n(n,t,i){n===void 0&&(n="dropdown-single");t===void 0&&(t="UserSelectedId");i===void 0&&(i=null);this.dropdownId=n;this.inputId=t;this.onChange=i}return n}();SingleSelectionDropdownComponent=function(){function n(n){var t=this;this.options=new SingleSelectionDropdownOption;this.render=function(n){var i,r,u;n===void 0&&(n=new SingleSelectionDropdownOption);t.options=t.$.extend({},t.options,n);i=t.$("#"+t.options.dropdownId);t.$dropdown=i;r=t.$("#"+t.options.inputId);t.$hiddenInput=r;u=t;t.selectedValue=u.getSelectedItem();t.$dropdown.multiselect({multiple:!1,maxHeight:300,numberDisplayed:1,includeSelectAllOption:!1,onChange:t.onchange})};this.getSelectedItem=function(){var n=[],i=t.$dropdown.find("option:selected"),r=t.$;return i.each(function(){n.push([r(this).val()])}),n.length?n[0].toString():""};this.updateSelectedValue=function(){t.$hiddenInput.val(t.selectedValue)};this.onchange=function(){t.selectedValue=t.getSelectedItem();t.options.onChange&&t.options.onChange()};this.$=n}return n}();MemberBetListView=function(){function n(n,t,i,r,u){var f=this;this.init=function(){f.cacheElements();f.bindFilter();f.registerEvents()};this.changeBetlistType=function(){var n=f.betlistTypeComponent.$dropdown.find("option:selected").data("url");f.windowLocation.href=n};this.onSubmitEvent=function(n){f.$.blockUI();var t=f.getParams();if(!t.IsAnyProductSelected){f.showValidaProductError();f.$.unblockUI();n.preventDefault();return}f.$isFilterVisible.val(String(f.screenSmallThan768()?!1:t.IsFilterVisible))};this.onClickIconFilter=function(){var n=f.$betlistForm,t=n.hasClass("hide");t?(f.$pageTitle.removeClass("hide-filter"),f.$betlistForm.removeClass("hide")):(f.$pageTitle.addClass("hide-filter"),f.$betlistForm.addClass("hide"))};this.getParams=function(){var n=f.productMultiSelectionComponent.getSelectedItems(),t=f.$custId.val();return{CustId:t,IsAnyProductSelected:n.length>0,IsFilterVisible:!f.$betlistForm.is(":hidden")}};this.showValidaProductError=function(){return f.$multiSelectProductButton.addClass("error")};this.screenSmallThan768=function(){var n=screen.width||f.$(window).width();return n<768};this.$=n;this.dateRangePickerComponent=t;this.productMultiSelectionComponent=i;this.betlistTypeComponent=r;this.windowLocation=u}return n.prototype.cacheElements=function(){this.$betlistForm=this.$("#betlist-form");this.$pageTitle=this.$(".bl_title");this.$custId=this.$("#CustId");this.$isFilterVisible=this.$("#IsFilterVisible")},n.prototype.bindFilter=function(){var n=new SingleSelectionDropdownOption("dropdown-betlist-type","BetlistType",this.changeBetlistType);this.betlistTypeComponent.render(n);this.productMultiSelectionComponent.render();this.$multiSelectProductButton=this.$("#dropdown-product").parent().find(".multiselect.btn");this.dateRangePickerComponent.render()},n.prototype.registerEvents=function(){this.$betlistForm.submit(this.onSubmitEvent);this.$(".icon-filter").on("click",this.onClickIconFilter)},n}();__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();RunningBetListView=function(n){function t(t,i,r,u,f){var e=n.call(this,t,i,r,u,f)||this;return e.init=function(){e.cacheDOMElements();e.bindFilter();e.registerEvents();e.$getallCheckbox.trigger("change")},e.cacheDOMElements=function(){n.prototype.cacheElements.call(e);e.$fromDate=e.$("#from-date");e.$toDate=e.$("#to-date");e.$getallCheckbox=e.$("#GetAll")},e.onChangeGetAllCheckbox=function(){var n=e.$getallCheckbox,t=n.is(":checked");t?(e.$fromDate.prop("disabled",!0),e.$toDate.prop("disabled",!0),e.$dateRangeSubmitButton.prop("disabled",!0)):(e.$fromDate.prop("disabled",!1),e.$toDate.prop("disabled",!1),e.$dateRangeSubmitButton.prop("disabled",!1))},e.$=t,e}return __extends(t,n),t.prototype.bindFilter=function(){n.prototype.bindFilter.call(this);this.$dateRangeSubmitButton=this.$("#dropdown-daterange").parent().find(".btn-submit")},t.prototype.registerEvents=function(){n.prototype.registerEvents.call(this);this.$getallCheckbox.change(this.onChangeGetAllCheckbox)},t}(MemberBetListView);$(function(){var n=new RunningBetListView($,new DateRangePickerComponent($),new ProductMultiSelectionComponent($),new SingleSelectionDropdownComponent($),window.location);n.init()});